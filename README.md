The code is split into multiple parts:
    1) 